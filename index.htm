<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>LIFE STYLE SHIRVA - Scratch & Win</title>
<style>
/* ===== General Body ===== */
body, html {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    background: #f0f0f0;
}
/* ===== Header ===== */
header {
    background: #4CAF50;
    color: white;
    padding: 15px;
    width: 100%;
    text-align: center;
    font-size: 1.8rem;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
/* ===== Dashboard ===== */
.dashboard {
    background: white;
    padding: 15px;
    border-radius: 16px;
    width: 95%;
    max-width: 360px;
    text-align: center;
    margin-top: 20px;
    flex-shrink: 0;
}
.dashboard input { width: 100%; padding: 12px; margin: 8px 0; font-size: 1rem; border-radius: 10px; border: 1px solid #ccc; box-sizing: border-box; }
.dashboard input:focus { border: 1px solid #4CAF50; box-shadow: 0 0 6px rgba(76, 175, 80, 0.4); }
.dashboard button { width: 100%; padding: 14px; font-size: 1.1rem; border-radius: 10px; margin-top: 10px; border: none; color: white; background: #4CAF50; cursor: pointer; font-weight: bold; }
.dashboard button:hover { background: #45a049; }
.message { margin-top: 10px; font-weight: bold; font-size: 0.9rem; }
.error { color: red; }
.success { color: green; }
/* ===== PIN Screen ===== */
#pinScreen input { width: 100%; padding:12px; margin:8px 0; border-radius:10px; border:1px solid #ccc; }
#pinScreen button { width: 100%; padding:14px; margin-top:10px; border:none; color:white; background:#4CAF50; border-radius:10px; cursor:pointer; font-weight:bold; }
#pinScreen button:hover { background:#45a049; }
/* ===== Condition Box ===== */
#firstScreenConditionBox {
    display:none; margin-top: 15px; padding: 12px;
    background: #FFF8DC; border: 2px solid #FFD700; border-radius: 12px;
    font-size: 0.9rem; text-align: left; line-height: 1.5;
}
#firstScreenConditionBox span { display:block; }
/* ===== Terms ===== */
#termsAndConditions {
    width: 95%; max-width: 360px; margin: 10px auto; padding: 12px;
    background: #f9f9f9; border: 1px solid #ddd; border-radius: 12px;
    font-size: 0.8rem; line-height: 1.4; color: #333; overflow-y: auto; max-height: 20vh;
}
/* ===== Second Screen ===== */
.scratch-container {
    position: relative; width: 100%; max-width: 420px;
    background: radial-gradient(circle, #FFFAF0, #FF6347); border-radius: 20px;
    display: none; flex-direction: column; align-items: center; justify-content: flex-start;
    padding: 15px; box-sizing: border-box; flex-shrink: 0;
}
.header-text {
    font-size: 3rem; font-weight: bold; color: #FFD700; text-align: center;
    text-shadow: 1px 1px 3px #000; animation: grandBlink .5s infinite; margin-bottom: 10px;
}
@keyframes grandBlink { 0%,100%{ color:#FFD700; transform:scale(1);} 50%{ color:#FF4500; transform:scale(1.1);} }
#scratchCanvas {
    width: 90vw; max-width: 320px; aspect-ratio: 1/1; border-radius: 50%;
    display: block; touch-action: none; position: relative; z-index: 2;
}
#offer {
    position:absolute;
    width:90vw;
    max-width:320px;
    aspect-ratio:1/1;
    top:0;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    background:#FFF8DC;
    border-radius:50%;
    font-weight:bold;
    font-size:3rem;
    color:#333;
    padding:10px;
    box-sizing:border-box;
    z-index:1;
}
#afterScratchConditionBox {
    display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    padding:25px; background:#fff; border:4px solid #FFD700; border-radius:15px;
    text-align:center; z-index:9999; width:90%; max-width:350px;
}
#afterScratchConditionBox span { display:block; margin:10px 0; font-size:0.9rem; }
.lamp-container { width:100%; display:flex; justify-content:space-around; margin-top:10px; }
.lamp { width:25px; height:25px; background: radial-gradient(circle,#FFD700 60%,#FF8C00 100%); border-radius:50%; box-shadow:0 0 10px #FFD700; }
.footer-text { text-align:center; font-size:.7rem; color:#5C4033; font-weight:bold; margin-top:10px; }
.celebration { position:fixed; top:0; left:0; width:100vw; height:100vh; pointer-events:none; overflow:hidden; z-index:9999; display:none; }
.particle { position:absolute; font-size:1.5rem; animation: realisticFly 5s ease-out forwards; }
@keyframes realisticFly { 0% {opacity:1;} 100% {opacity:0;} }
</style>
</head>
<body>
<header>‚ú®'üéâHAPPY DEEPAVALI 2025,'üí•üåüWELCOME TO LIFE STYLE SHIRVA!</header>
<!-- PIN Screen -->
<div class="dashboard" id="pinScreen" style="display:none;">
    <h3>Enter Security PIN</h3>
    <input type="password" id="pinInput" placeholder="Enter PIN">
    <button onclick="checkPin()">Submit</button>
    <div id="pinMsg" class="message"></div>
</div>
<!-- First Screen -->
<div class="dashboard" id="firstScreen">
    <input type="number" id="billAmt" placeholder="Enter Your Bill Amount">
    <button id="proceedBtn" onclick="proceed()">Proceed</button>
    <div id="msg" class="message"></div>
    <div id="firstScreenConditionBox">
        <span id="condBillAmt">Bill Amount: </span>
        <span id="condCouponCode">Coupon Code: </span>
        <span id="condWinningGift">Winning Gift: </span>
    </div>
    <div id="termsAndConditions">
        * Scratch Card is valid only on purchases above ‚Çπ1000.<br>
        * Scratch Card is valid for 10 days only.<br>
        * Each customer can use only one scratch card per purchase.<br>
        * Take a screenshot of the result.<br>
        * No exchange. Scratch card is final.<br>
    </div>
</div>
<!-- Second Screen -->
<div class="scratch-container" id="secondScreen">
    <div class="header-text">Scratch & WinüèÜ</div>
    <div style="position:relative;">
        <canvas id="scratchCanvas" width="300" height="300"></canvas>
        <div id="offer"></div>
    </div>
    <div class="lamp-container"><div class="lamp"></div><div class="lamp"></div></div>
    <div class="footer-text">¬© Life Style Shirva üíñ</div>
    <div id="afterScratchConditionBox">
        <h1 class="blinking">üåüüí∞ Congratulations! üèÜ üåü</h1>
        <span id="afterBillAmt">Bill Amount: </span>
        <span id="winningInfo">You Won: XXXXXXX</span>
        <span id="couponCodeInfo">Code: ABCD-XXXX-XXXX</span>
        <span id="scratchDateTime">Date & Time: DD-MM-YYYY</span>
        <a href="#" id="whatsappButton" style="background:green;color:white;padding:12px 30px;border-radius:8px;text-decoration:none;display:inline-block;margin-top:10px;">Send to WhatsApp</a>
    </div>
    <div class="celebration" id="celebrationContainer"></div>
</div>
<script>
const SECURITY_PIN = "6009";
window.onload = function() {
    if(localStorage.getItem("visitedOnce")) {
        document.getElementById("firstScreen").style.display = "none";
        document.getElementById("pinScreen").style.display = "block";
    }
};
function checkPin() {
    const pin = document.getElementById("pinInput").value;
    if(pin === SECURITY_PIN){
        document.getElementById("pinScreen").style.display = "none";
        document.getElementById("firstScreen").style.display = "block";
    } else {
        document.getElementById("pinMsg").innerText = "‚ùå Wrong PIN. Try again.";
    }
}
function proceed() {
    const billAmtInput = document.getElementById('billAmt').value.trim();
    const billAmt = parseFloat(billAmtInput);
    const msg = document.getElementById('msg');
    const condBox = document.getElementById('firstScreenConditionBox');
    msg.innerHTML = "";
    if(!billAmtInput || isNaN(billAmt)){
        msg.innerHTML="‚ö†Ô∏è Enter Bill Amount!"; return;
    }
    if(billAmt < 1000){
        msg.innerHTML="‚ö†Ô∏è Scratch card not available under ‚Çπ1000"; return;
    }
    msg.innerHTML=`‚úÖ Bill accepted!`;
    condBox.style.display='block';
    document.getElementById('condBillAmt').innerText=`Bill Amount: ‚Çπ${billAmt}`;
    document.getElementById('condCouponCode').innerText=`Coupon Code: -`;
    document.getElementById('condWinningGift').innerText=`Winning Gift: -`;
    document.getElementById('firstScreen').style.display="none";
    document.getElementById('secondScreen').style.display="flex";
    localStorage.setItem("visitedOnce", "true");
    const gifts = ['üéÅ Surprise Gift','üí∞ Cashback Offer'];
    document.getElementById('offer').innerText = gifts[Math.floor(Math.random()*gifts.length)];
}
const canvas=document.getElementById('scratchCanvas'),ctx=canvas.getContext('2d'),offer=document.getElementById('offer');let isDrawing=false,scratchActions=0,revealed=false;
function getPointerPos(e){const r=canvas.getBoundingClientRect();return{x:(e.touches?e.touches[0].clientX:e.clientX)-r.left,y:(e.touches?e.touches[0].clientY:e.clientY)-r.top};}
function scratch(e){const p=getPointerPos(e);ctx.globalCompositeOperation='destination-out';ctx.beginPath();ctx.arc(p.x,p.y,20,0,Math.PI*2);ctx.fill();}
function startScratch(e){if(revealed)return;isDrawing=true;}
function performScratch(e){if(!isDrawing||revealed)return;scratch(e);}
function endScratch(e){if(!revealed&&isDrawing){scratchActions++;if(scratchActions>=1){startCelebrationAndAfterBox();}}isDrawing=false;}
function generateCouponCode(){return 'LS-'+Math.random().toString(36).substring(2,10).toUpperCase();}
function getCurrentDateTime(){return new Date().toLocaleString();}
function updateWhatsAppButton(randomGift,couponCode,dateTime){
    const billAmt=document.getElementById('billAmt').value.trim();
    const msg=`Hi Life Style Shirva Team.\nI am happy with this Scratch & Win Card.\n\nBill Amount: ‚Çπ${billAmt}\nWinning Prize: ${randomGift}\nCard No: ${couponCode}\nDate & Time: ${dateTime}`;
    document.getElementById('whatsappButton').href=`https://wa.me/918431270716?text=${encodeURIComponent(msg)}`;
}
function startCelebrationAndAfterBox(){
    const billAmt=parseFloat(document.getElementById('billAmt').value.trim());
    let gifts=[];
    if(billAmt>=1000 && billAmt<1500) gifts=['SNACKS PLATE 1P'];
    else if(billAmt>=1500 && billAmt<2000) gifts=['SNACKS PLATE 2P','DECORATIVE PLATE 1P','MEALS PLATE 1P','üí∞50 ‚Çπ Cashback'];
    else if(billAmt>=2000 && billAmt<3500) gifts=['ICE CREAM BOWL SET 1P','DECORATIVE PLATE 1P','MEASL PLATE 1P','üí∞100 ‚Çπ Cashback'];
    else if(billAmt>=3500 && billAmt<5000) gifts=['TEE SET 1P','ICE CREAM BOWL 1P','MEAL PLATE 2P','üí∞100 ‚Çπ Cashback','MEALS PLATE 2P'];
    else if(billAmt>=5000) gifts=['TEE SET 1P','ICE CREAM BOWL 1P','MEALS PLATE 2P','üí∞200 ‚Çπ Cashback','üí∞300 ‚Çπ Cashback'];
    revealFull(gifts[Math.floor(Math.random()*gifts.length)]);
}
function revealFull(randomGift){
    revealed=true;ctx.clearRect(0,0,canvas.width,canvas.height);offer.innerText=randomGift;
    setTimeout(()=>{
        const billAmt=document.getElementById('billAmt').value.trim();
        const code=generateCouponCode(),dateTime=getCurrentDateTime();
        document.getElementById('afterBillAmt').innerText=`Bill Amount: ‚Çπ${billAmt}`;
        document.getElementById('winningInfo').innerText=`You Won: ${randomGift}`;
        document.getElementById('couponCodeInfo').innerText=`Code: ${code}`;
        document.getElementById('scratchDateTime').innerText=`Date & Time: ${dateTime}`;
        document.getElementById('afterScratchConditionBox').style.display='block';
        updateWhatsAppButton(randomGift,code,dateTime);
        const celebration=document.getElementById('celebrationContainer');celebration.innerHTML='';
        const particles=['üå∏','‚ú®','üéâ','üí•','üåü'];for(let i=0;i<60;i++){const s=document.createElement('span');s.className='particle';s.innerText=particles[Math.floor(Math.random()*particles.length)];s.style.left=Math.random()*window.innerWidth+'px';s.style.top=Math.random()*window.innerHeight+'px';celebration.appendChild(s);}celebration.style.display='block';setTimeout(()=>{celebration.style.display='none';},5000);
    },1000);
}
ctx.fillStyle='silver';ctx.fillRect(0,0,canvas.width,canvas.height);ctx.font='bold 18px Arial';ctx.fillStyle='black';ctx.textAlign='center';ctx.fillText('SCRATCH HERE üéâ',canvas.width/2,canvas.height/2);
canvas.addEventListener('pointerdown',startScratch);canvas.addEventListener('pointermove',performScratch);canvas.addEventListener('pointerup',endScratch);
</script>
</body>
</html>
